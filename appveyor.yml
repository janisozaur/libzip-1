os:
- Visual Studio 2017
before_build:
  cmd: >-
    git clone https://github.com/Microsoft/vcpkg
    
    cd vcpkg
    
    .\bootstrap-vcpkg.bat
    
    .\vcpkg integrate install
    
    .\vcpkg install zlib:x64-windows bzip2:x64-windows
    
    cd ..

    mkdir build

    cd build

    cmake -DCMAKE_TOOLCHAIN_FILE=%cd%/../vcpkg/scripts/buildsystems/vcpkg.cmake .. -G"Visual Studio 15 2017 Win64"
    
    appveyor PushArtifact config.h

    appveyor PushArtifact CMakeCache.txt

build_script:
  cmd: >-
    cmake --build . --config Release --target INSTALL

    cmake --build . --config Debug --target INSTALL
